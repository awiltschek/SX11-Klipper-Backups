[respond]
default_type: echo

[gcode_macro test_number] ### Executing Test Number
variable_testnumber:  1 
gcode:

[gcode_macro run_increment_test_number]
gcode:
   RESPOND TYPE=command MSG="Current Test Number {printer["gcode_macro test_number"].testnumber}"
   increment_test_number
   RESPOND TYPE=command MSG="Test Number after increment {printer["gcode_macro test_number"].testnumber}"

[gcode_macro increment_test_number]
gcode:
   SET_GCODE_VARIABLE MACRO=test_number VARIABLE=testnumber VALUE={ printer["gcode_macro test_number"].testnumber + 1 }