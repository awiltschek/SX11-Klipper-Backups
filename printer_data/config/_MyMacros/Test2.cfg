[gcode_macro test_number] ### Executing Test Number
variable_testnumber:  1 
gcode:

[gcode_macro increment]
variable_original: 0
variable_updated: 0
gcode:
   RESPOND TYPE=command MSG="Current Test Number { printer["gcode_macro test_number"].testnumber }"
   {% set original = printer["gcode_macro test_number"].testnumber %}
   RESPOND TYPE=command MSG="Original Test Number { original }"

   SET_GCODE_VARIABLE MACRO=test_number VARIABLE=testnumber VALUE={ printer["gcode_macro test_number"].testnumber + 1 }

   {% set updated = printer["gcode_macro test_number"].testnumber %}

   RESPOND TYPE=command MSG="Updated Test Number { updated } <== Should not be changed from the 'Original'"
   {% if original == updated %}
     RESPOND TYPE=command MSG="Test Number NOT Updated"
   {% else %}
     RESPOND TYPE=command MSG="Test Number UPDATED"
   {% endif %}
   print_final_test_number
	 {% set new = printer["gcode_macro test_number"].testnumber %}
	 M117 New: {new}

[gcode_macro print_final_test_number]
gcode:
   RESPOND TYPE=command MSG="Test Number after increment { printer["gcode_macro test_number"].testnumber }"